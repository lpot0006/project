<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Macropodinae Biodiversity of Victoria</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="css/theme.css">
</head>
<body class="container">

    <!-- CSS Loader -->
    <div id="loader" style="position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);">Loading...</div>

    <!-- Tree Diagram -->
    <div class="row">
      <div class="col-12 text-center mb-4">
        <div id="tree-diagram"></div>
      </div>
    </div>

    <!-- Intro and Map Text -->
    <div class="row">
      <div class="col-12 text-center">
        <div id="bar-chart-text">
            <h3>
              To use this visualisation, please select any of the Family, or Species options
              from the Tree Diagram above. This will sort the map and second bar chart by species!
            </h3>
            <p>
              Macropodinae, a subfamily of marsupials commonly known as kangaroos, wallabies, 
              and their relatives, play a vital role in the biodiversity of Victoria, Australia. 
              This region is home to several species of Macropodinae, including the Eastern and 
              Western Grey Kangaroos, Red Kangaroo, Swamp Wallaby, Red-necked Wallaby, and the 
              Brush-tailed Rock-wallaby. These herbivorous marsupials are key contributors to 
              maintaining ecological balance in Victoria’s grasslands, woodlands, and forest 
              ecosystems.
            </p>
            <p>
              The diversity of Macropodinae in Victoria not only highlights the region’s rich 
              natural heritage but also underscores the importance of conservation efforts, as 
              some species, like the Brush-tailed Rock-wallaby, are threatened and require active 
              protection. Their presence supports predator-prey dynamics, seed dispersal, and the 
              health of native vegetation. Understanding the population trends and habitat 
              requirements of Macropodinae species is crucial for sustaining the biodiversity and 
              ecological stability of Victoria’s natural landscapes.
            </p>
            <br />
            <br />
        </div>
      </div>
    </div>

    <!-- Map Visualization -->
    <div class="row">
        <!-- Chart Column (Left) -->
        <div class="col-12">
            <div id="map-visualization"></div>
        </div>
    </div>
  
    <!-- Bar Chart Visualization and Text -->
    <div class="row my-4">
      <div class="col-md-4 ms-10">
        <div id="bar-chart-text">
          <p>Bar chart related text goes here.</p>
        </div>
      </div>
      <div class="col-md-8">
        <div id="total-population-bar-chart"></div>
      </div>
    </div>
  
    <!-- Total Population Bar Chart and Text -->
    <div class="row my-4">
      <div class="col-md-8">
        <div id="population-bar-chart"></div>
      </div>
    </div>
</body>

<script type="text/javascript" src="js/treediagram.js"></script>
<script type="text/javascript" src="js/mapspec.js"></script>
<script type="text/javascript" src="js/barcharts.js"></script>
<script type="text/javascript" src="js/data.js"></script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      // Create an array of promises for each chart rendering
      const chartPromises = [];

      // Add the promises to the array
      chartPromises.push(loadTreeDiagram());
      chartPromises.push(loadMapVisualization());
      chartPromises.push(populationBarChart());
      chartPromises.push(totalPopulationBarChart());

      // When all charts are loaded, hide the loader and show the charts
      Promise.all(chartPromises).then(() => {
      document.getElementById('loader').style.display = 'none';
      });
  });
</script>
</html>
